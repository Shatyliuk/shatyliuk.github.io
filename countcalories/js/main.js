!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);n(1),n(6);const i=function(){this.data=[],this.currentItem=null,this.totalCalories=0};i.prototype.createItem=function(t,e){this.data.push({id:this.data.length>0?this.data[this.data.length-1].id+1:0,name:t,calories:e})},i.prototype.getItems=function(){return this.data},i.prototype.setItems=function(t){this.data=t},i.prototype.log=function(){console.log(this.data)},i.prototype.countCalories=function(){let t=0;this.data.forEach(e=>{t+=e.calories}),this.totalCalories=t},i.prototype.getItemById=function(t){let e=null;return this.data.forEach(n=>{n.id===t&&(e=n)}),e},i.prototype.setCurrentItem=function(t){this.currentItem=t},i.prototype.getCurrentItem=function(){return this.currentItem},i.prototype.deleteItem=function(){this.data.forEach((t,e)=>{t.id===this.currentItem.id&&this.data.splice(e,1)})},i.prototype.updateItem=function(t){const e=t.name,n=parseInt(t.calories);this.data.forEach(t=>{t.id===this.currentItem.id&&(t.name=e,t.calories=n)})},i.prototype.clearAll=function(){this.data=[]};const o=new i,r=function(){this.list=document.getElementById("collection-list"),this.calories=document.querySelector(".total-calories"),this.addBtn=document.querySelector(".add-btn"),this.mealInput=document.getElementById("meal"),this.caloriesInput=document.getElementById("calories"),this.updateBtn=document.querySelector(".update-btn"),this.deleteBtn=document.querySelector(".delete-btn"),this.backBtn=document.querySelector(".back-btn"),this.clearBtn=document.querySelector(".clear-btn")};r.prototype.renderCalories=function(t){this.calories.textContent=t},r.prototype.renderItems=function(t){this.list.style.display="block";let e="";t.forEach(t=>{e+=`\n            <li id="item-${t.id}" class="collection-item"><strong>${t.name}: </strong><em>${t.calories} calories</em><a href="#" class="right"><i class="edit-item fas fa-pencil-alt"></i></a></li>\n        `}),this.list.innerHTML=e},r.prototype.getInputs=function(){return{name:this.mealInput.value,calories:this.caloriesInput.value}},r.prototype.clearInputs=function(){this.mealInput.value="",this.caloriesInput.value=""},r.prototype.hideList=function(){this.list.style.display="none"},r.prototype.clearEditState=function(){this.clearInputs(),this.backBtn.style.display="none",this.deleteBtn.style.display="none",this.updateBtn.style.display="none",this.addBtn.style.display="inline-block"},r.prototype.showEditState=function(){this.backBtn.style.display="inline-block",this.deleteBtn.style.display="inline-block",this.updateBtn.style.display="inline-block",this.addBtn.style.display="none"},r.prototype.addItemToForm=function(t){this.mealInput.value=t.name,this.caloriesInput.value=t.calories,this.showEditState()};const a=new r,s=function(){this.itemsFromStorage=JSON.parse(localStorage.getItem("items"))||[]};s.prototype.setItems=function(t){this.itemsFromStorage=t,localStorage.setItem("items",JSON.stringify(this.itemsFromStorage))},s.prototype.getItems=function(){return this.itemsFromStorage},s.prototype.clearItems=function(){localStorage.clear("items")},s.prototype.deleteItem=function(t){this.itemsFromStorage.forEach((e,n)=>{e.id===t.id&&this.itemsFromStorage.splice(n,1)}),localStorage.setItem("items",JSON.stringify(this.itemsFromStorage))},s.prototype.editItem=function(t){this.itemsFromStorage.forEach(e=>{e.id===t.id&&(e.name=t.name,e.calories=t.calories)}),localStorage.setItem("items",JSON.stringify(this.itemsFromStorage))};const l=new s;!function(){a.clearEditState();let t=[];function e(){event.preventDefault(),o.clearAll(),o.countCalories(),a.renderItems(o.data),a.hideList(),a.clearEditState(),a.renderCalories(o.totalCalories),l.clearItems()}function n(t){t.preventDefault(),o.deleteItem(),a.clearEditState(),o.countCalories(),a.renderItems(o.data),a.renderCalories(o.totalCalories),l.deleteItem(o.currentItem),0===o.data.length&&a.hideList()}function i(t){t.preventDefault(),a.clearEditState()}function r(t){t.preventDefault();const e=a.getInputs();o.updateItem(e),l.editItem(o.getItems()),o.countCalories(),a.renderItems(o.data),a.renderCalories(o.totalCalories)}function s(t){if(t.preventDefault(),t.target.classList.contains("edit-item")){const e=parseInt(t.target.parentNode.parentNode.id.split("-")[1]),n=o.getItemById(e);o.setCurrentItem(n),a.addItemToForm(o.getCurrentItem())}}function c(t){t.preventDefault();const e=a.getInputs();e.name.length>0&&e.calories>0?(o.createItem(e.name,parseInt(e.calories)),o.countCalories(),a.renderCalories(o.totalCalories),a.clearInputs(),a.renderItems(o.getItems()),l.setItems(o.getItems())):alert("enter a valid info")}function d(t){if(13===t.keyCode||13===t.which)return t.preventDefault(),!1}l.getItems()&&(o.setItems(l.getItems()),t=l.getItems()),t.length>0?(o.countCalories(),a.renderItems(t),a.renderCalories(o.totalCalories)):a.hideList(),a.addBtn.addEventListener("click",c),document.addEventListener("keypress",d),a.list.addEventListener("click",s),a.updateBtn.addEventListener("click",r),a.backBtn.addEventListener("click",i),a.deleteBtn.addEventListener("click",n),a.clearBtn.addEventListener("click",e)}()},function(t,e){},,,,,function(t,e){}]);